{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/facun/OneDrive/Escritorio/09-React-Routing/clima-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/facun/OneDrive/Escritorio/09-React-Routing/clima-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/facun/OneDrive/Escritorio/09-React-Routing/clima-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import React,{useEffect,useState}from\"react\";import'./Suggestiones.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SearchBar(_ref){var onSearch=_ref.onSearch;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),names=_useState2[0],setNames=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),city=_useState4[0],setCity=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),suggestiones=_useState6[0],setSuggestiones=_useState6[1];useEffect(function(){var loadNames=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('https://infinite-shelf-73106.herokuapp.com/');case 2:response=_context.sent;//Ciudades en express, ya que api no otorga json con LISTA de citys..\n//console.log(response.data.map(el=>el.name))\nsetNames(response.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function loadNames(){return _ref2.apply(this,arguments);};}();loadNames();},[]);var onSuggestHandler=function onSuggestHandler(city){// onClick = onSuggestHandler donde seteo city y devuelvo array vacio para\nsetCity(city);// que elimine la lista retornada\nsetSuggestiones([]);onSearch(city);};var onChangeHandler=function onChangeHandler(city){var matches=[];if(city.length>0){matches=names.filter(function(user){var regex=new RegExp(\"\".concat(city),\"\");return user.name.match(regex);});}//console.log(matches)\nsetSuggestiones(matches.slice(0,15));setCity(city);};return/*#__PURE__*/_jsx(\"div\",{className:\"form\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){e.preventDefault();onSearch(city);},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Busca tu ciudad..\",value:city,onChange:function onChange(e){return onChangeHandler(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"AGREGAR\"}),suggestiones&&suggestiones.map(function(suggestiones){return/*#__PURE__*/_jsxs(\"div\",{className:\"Suggestiones\",onClick:function onClick(){return onSuggestHandler(suggestiones.name);},children:[suggestiones.name,\", \",suggestiones.country]},suggestiones.id);})]})});}","map":{"version":3,"names":["axios","React","useEffect","useState","SearchBar","onSearch","names","setNames","city","setCity","suggestiones","setSuggestiones","loadNames","get","response","data","onSuggestHandler","onChangeHandler","matches","length","filter","user","regex","RegExp","name","match","slice","e","preventDefault","target","value","map","country","id"],"sources":["C:/Users/facun/OneDrive/Escritorio/09-React-Routing/clima-app/src/components/SearchBar.jsx"],"sourcesContent":["import axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport './Suggestiones.css';\n\n\n\n\n\nexport default function SearchBar({onSearch}) {\n\n  const [names, setNames] = useState([])\n  const [city, setCity] = useState(\"\");\n  const [suggestiones, setSuggestiones] = useState([])\n\n  useEffect(()=>{\n    const loadNames = async () => {                                                     //BUSCADOR EN TIEMPO REAL\n      const response = await axios.get('https://infinite-shelf-73106.herokuapp.com/') //Ciudades en express, ya que api no otorga json con LISTA de citys..\n      //console.log(response.data.map(el=>el.name))\n      setNames(response.data)\n    }\n    loadNames()\n  },[])\n\n  const onSuggestHandler = (city)=>{      // onClick = onSuggestHandler donde seteo city y devuelvo array vacio para\n    setCity(city)                         // que elimine la lista retornada\n    setSuggestiones([])\n    onSearch(city)\n  }\n\n  const onChangeHandler = (city) =>{\n    let matches = []\n    if(city.length>0){\n      matches = names.filter(user =>{\n        const regex = new RegExp(`${city}`,\"\")\n        return user.name.match(regex)\n      })\n    }\n    //console.log(matches)\n    setSuggestiones(matches.slice(0,15))\n    setCity(city)\n  }\n  \n\n  \n  return (\n    <div className=\"form\">\n    <form  onSubmit={(e) => {\n      e.preventDefault();\n      onSearch(city);\n    }}>\n      <input  \n        type=\"text\"\n        placeholder=\"Busca tu ciudad..\"\n        value={city}\n        onChange={e =>onChangeHandler(e.target.value)}\n        \n      />\n      <input type=\"submit\" value=\"AGREGAR\" />\n      {suggestiones && suggestiones.map((suggestiones)=>\n      <div key={suggestiones.id} className = \"Suggestiones\" onClick={()=>onSuggestHandler(suggestiones.name) }>{suggestiones.name}, {suggestiones.country}</div>\n      )}\n      \n    </form>\n    </div>\n  );\n}\n"],"mappings":"ycAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,MAAOC,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAO,oBAAP,C,wFAMA,cAAe,SAASC,UAAT,MAA+B,IAAXC,SAAW,MAAXA,QAAW,CAE5C,cAA0BF,QAAQ,CAAC,EAAD,CAAlC,wCAAOG,KAAP,eAAcC,QAAd,eACA,eAAwBJ,QAAQ,CAAC,EAAD,CAAhC,yCAAOK,IAAP,eAAaC,OAAb,eACA,eAAwCN,QAAQ,CAAC,EAAD,CAAhD,yCAAOO,YAAP,eAAqBC,eAArB,eAEAT,SAAS,CAAC,UAAI,CACZ,GAAMU,UAAS,6FAAG,wKACOZ,MAAK,CAACa,GAAN,CAAU,6CAAV,CADP,QACVC,QADU,eACgE;AAChF;AACAP,QAAQ,CAACO,QAAQ,CAACC,IAAV,CAAR,CAHgB,sDAAH,kBAATH,UAAS,2CAAf,CAKAA,SAAS,GACV,CAPQ,CAOP,EAPO,CAAT,CASA,GAAMI,iBAAgB,CAAG,QAAnBA,iBAAmB,CAACR,IAAD,CAAQ,CAAO;AACtCC,OAAO,CAACD,IAAD,CAAP,CAAsC;AACtCG,eAAe,CAAC,EAAD,CAAf,CACAN,QAAQ,CAACG,IAAD,CAAR,CACD,CAJD,CAMA,GAAMS,gBAAe,CAAG,QAAlBA,gBAAkB,CAACT,IAAD,CAAS,CAC/B,GAAIU,QAAO,CAAG,EAAd,CACA,GAAGV,IAAI,CAACW,MAAL,CAAY,CAAf,CAAiB,CACfD,OAAO,CAAGZ,KAAK,CAACc,MAAN,CAAa,SAAAC,IAAI,CAAG,CAC5B,GAAMC,MAAK,CAAG,GAAIC,OAAJ,WAAcf,IAAd,EAAqB,EAArB,CAAd,CACA,MAAOa,KAAI,CAACG,IAAL,CAAUC,KAAV,CAAgBH,KAAhB,CAAP,CACD,CAHS,CAAV,CAID,CACD;AACAX,eAAe,CAACO,OAAO,CAACQ,KAAR,CAAc,CAAd,CAAgB,EAAhB,CAAD,CAAf,CACAjB,OAAO,CAACD,IAAD,CAAP,CACD,CAXD,CAeA,mBACE,YAAK,SAAS,CAAC,MAAf,uBACA,cAAO,QAAQ,CAAE,kBAACmB,CAAD,CAAO,CACtBA,CAAC,CAACC,cAAF,GACAvB,QAAQ,CAACG,IAAD,CAAR,CACD,CAHD,wBAIE,cACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,mBAFd,CAGE,KAAK,CAAEA,IAHT,CAIE,QAAQ,CAAE,kBAAAmB,CAAC,QAAGV,gBAAe,CAACU,CAAC,CAACE,MAAF,CAASC,KAAV,CAAlB,EAJb,EAJF,cAWE,cAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,CAAC,SAA3B,EAXF,CAYGpB,YAAY,EAAIA,YAAY,CAACqB,GAAb,CAAiB,SAACrB,YAAD,qBAClC,aAA2B,SAAS,CAAG,cAAvC,CAAsD,OAAO,CAAE,yBAAIM,iBAAgB,CAACN,YAAY,CAACc,IAAd,CAApB,EAA/D,WAA0Gd,YAAY,CAACc,IAAvH,MAA+Hd,YAAY,CAACsB,OAA5I,GAAUtB,YAAY,CAACuB,EAAvB,CADkC,EAAjB,CAZnB,GADA,EADF,CAqBD"},"metadata":{},"sourceType":"module"}