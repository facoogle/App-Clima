{"ast":null,"code":"import _toConsumableArray from\"C:/Users/facun/OneDrive/Escritorio/09-React-Routing/clima-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"C:/Users/facun/OneDrive/Escritorio/09-React-Routing/clima-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/facun/OneDrive/Escritorio/09-React-Routing/clima-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/facun/OneDrive/Escritorio/09-React-Routing/clima-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import'./App.css';import Nav from'../components/Nav.jsx';import Cards from'../components/Cards.jsx';// importo los componentes About y City\nimport About from'../components/About';import City from'../components/City';import HomeCard from'../components/HomeCard.jsx';import axios from'axios';import{Route}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var apiKey='6a9b9651318ede2644e620f696ebfaf1';function App(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),latitude=_useState2[0],setLatitude=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),longitude=_useState4[0],setLongitude=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),temperature=_useState6[0],setTemperature=_useState6[1];var savePositionState=function savePositionState(position){setLatitude(position.coords.latitude);setLongitude(position.coords.longitude);};var fetchCity=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;window.navigator.geolocation.getCurrentPosition(savePositionState);_context.next=4;return axios.get(\"https://api.openweathermap.org/data/2.5/weather?lat=\".concat(latitude,\"&lon=\").concat(longitude,\"&appid=60d505bb48f9c02e8d1f29a621cd125f&units=metric&lang=es\"));case 4:res=_context.sent;setTemperature({name:res.data.name,temp:res.data.main.temp,temp_min:res.data.main.temp_min,temp_max:res.data.main.temp_max,pressure:res.data.main.pressure,humidity:res.data.main.humidity,description:res.data.weather[0].description,icon:res.data.weather[0].icon,feels:res.data.main.feels_like});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function fetchCity(){return _ref.apply(this,arguments);};}();//console.log(temperature)\nuseEffect(function(){fetchCity();},[latitude,longitude]);var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),cities=_useState8[0],setCities=_useState8[1];function onClose(id){setCities(function(oldCities){return oldCities.filter(function(c){return c.id!==id;});});}function onSearch(ciudad){fetch(\"http://api.openweathermap.org/data/2.5/weather?q=\".concat(ciudad,\"&appid=\").concat(apiKey,\"&units=metric&lang=es\")).then(function(r){return r.json();}).then(function(recurso){if(recurso.main!==undefined){var _ciudad={min:Math.round(recurso.main.temp_min),max:Math.round(recurso.main.temp_max),img:recurso.weather[0].icon,id:recurso.id,wind:recurso.wind.speed,temp:recurso.main.temp,feels:recurso.main.feels_like,humidity:recurso.main.humidity,name:recurso.name,weather:recurso.weather[0].description,clouds:recurso.clouds.all,latitud:recurso.coord.lat,longitud:recurso.coord.lon};setCities(function(oldCities){return[].concat(_toConsumableArray(oldCities),[_ciudad]);});}else{alert(\"Ciudad no encontrada\");}});}function onFilter(ciudadId){var ciudad=cities.filter(function(c){return c.id===parseInt(ciudadId);});if(ciudad.length>0){return ciudad[0];}else{return null;}}//const [rosario, setRosario] = useState(\"rosario\");\n//useEffect(() => {\n// onSearch(rosario);\n//}, [rosario]); \nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Route,{path:\"/\",render:function render(){return/*#__PURE__*/_jsx(Nav,{onSearch:onSearch});},fetchCity:fetchCity}),/*#__PURE__*/_jsx(Route,{path:\"/about\",component:About}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",render:function render(){return/*#__PURE__*/_jsx(HomeCard,{temperature:temperature});}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",render:function render(){return/*#__PURE__*/_jsx(Cards,{cities:cities,onClose:onClose});}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/ciudad/:ciudadId\",render:function render(_ref2){var match=_ref2.match;return/*#__PURE__*/_jsx(City,{city:onFilter(match.params.ciudadId)});}}),/*#__PURE__*/_jsx(\"hr\",{})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Nav","Cards","About","City","HomeCard","axios","Route","apiKey","App","latitude","setLatitude","longitude","setLongitude","temperature","setTemperature","savePositionState","position","coords","fetchCity","window","navigator","geolocation","getCurrentPosition","get","res","name","data","temp","main","temp_min","temp_max","pressure","humidity","description","weather","icon","feels","feels_like","console","log","cities","setCities","onClose","id","oldCities","filter","c","onSearch","ciudad","fetch","then","r","json","recurso","undefined","min","Math","round","max","img","wind","speed","clouds","all","latitud","coord","lat","longitud","lon","alert","onFilter","ciudadId","parseInt","length","match","params"],"sources":["C:/Users/facun/OneDrive/Escritorio/09-React-Routing/clima-app/src/containers/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport Nav from '../components/Nav.jsx';\nimport Cards from '../components/Cards.jsx';\n// importo los componentes About y City\nimport About from '../components/About';\nimport City from '../components/City';\nimport HomeCard from '../components/HomeCard.jsx';\nimport axios from 'axios'\nimport { Route } from 'react-router-dom';\n\nconst apiKey = '6a9b9651318ede2644e620f696ebfaf1';\n\n\n\n\n\n\n\nfunction App() {\n  \n  const [latitude, setLatitude] = useState(0);\n  const [longitude, setLongitude] = useState(0);\n  const [temperature, setTemperature] = useState(0);\n\n  const savePositionState = (position)=>{\n    setLatitude(position.coords.latitude);\n    setLongitude(position.coords.longitude);\n  }\n\nconst fetchCity = async () => {\n  try {\n     window.navigator.geolocation.getCurrentPosition(savePositionState);\n    const res = await axios.get(`https://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&appid=60d505bb48f9c02e8d1f29a621cd125f&units=metric&lang=es`)\n    setTemperature(\n      {name: res.data.name,\n       temp: res.data.main.temp,\n       temp_min: res.data.main.temp_min,\n       temp_max: res.data.main.temp_max,\n       pressure: res.data.main.pressure,\n       humidity: res.data.main.humidity,\n       description: res.data.weather[0].description,\n       icon: res.data.weather[0].icon,\n       feels: res.data.main.feels_like\n      }\n       \n       \n      )\n    \n  } catch (error) {\n    console.log(error)\n  }\n}\n//console.log(temperature)\nuseEffect(() => {\n  fetchCity();\n}, [latitude,longitude]);\n\n\n  \n\n  const [cities, setCities] = useState([]);\n  function onClose(id) {\n    setCities(oldCities => oldCities.filter(c => c.id !== id));\n  }\n\n  \n  \n  function onSearch(ciudad) {\n    fetch(`http://api.openweathermap.org/data/2.5/weather?q=${ciudad}&appid=${apiKey}&units=metric&lang=es`)\n      .then(r => r.json())\n      .then((recurso) => {\n        if(recurso.main !== undefined){\n          const ciudad = {\n            min: Math.round(recurso.main.temp_min),\n            max: Math.round(recurso.main.temp_max),\n            img: recurso.weather[0].icon,\n            id: recurso.id,\n            wind: recurso.wind.speed,\n            temp: recurso.main.temp,\n            feels:recurso.main.feels_like,\n            humidity:recurso.main.humidity,\n            name: recurso.name,\n            weather: recurso.weather[0].description,\n            clouds: recurso.clouds.all,\n            latitud: recurso.coord.lat,\n            longitud: recurso.coord.lon\n          };\n          setCities(oldCities => [...oldCities, ciudad]);\n        } else {\n          alert(\"Ciudad no encontrada\");\n        }\n      });\n  }\n  \n  function onFilter(ciudadId) {\n    let ciudad = cities.filter(c => c.id === parseInt(ciudadId));\n    if(ciudad.length > 0) {\n        return ciudad[0];\n    } else {\n        return null;\n    }\n  }\n  \n  \n  \n  \n  //const [rosario, setRosario] = useState(\"rosario\");\n\n\n\n  //useEffect(() => {\n   // onSearch(rosario);\n  //}, [rosario]); \n\n  \n\n\n\n  \n  return (\n    <div className=\"App\">\n      <Route path='/' render={() => <Nav onSearch={onSearch}/>} fetchCity = {fetchCity} />\n      <Route path='/about' component={About}/>\n      <Route exact path='/' render={() =>  <HomeCard temperature= {temperature}/> }/>\n      <Route exact path='/' render={() =>  <Cards cities={cities} onClose={onClose} /> }/>\n      <Route exact path='/ciudad/:ciudadId' \n             render={({match}) => (<City city={onFilter(match.params.ciudadId)}/>)}/>\n      <hr />\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}